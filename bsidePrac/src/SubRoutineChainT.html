<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>SubRoutineChainT 210118</title>
</head>
<body>

<script>
    // const arr = [1, [2, 3], 4];
    const arr = [1, [2, [3, [4, 5], 6], 7], 8, [9, [10]]]; // sum = 55
    const fStack = [{arrX:arr, idx:0}];
    let acc = 0;
    const subStack = [];

    while (fStack.length > 0) {
        const {arrX, idx} = fStack.pop();
        if (arrX.length === idx) {
            if (subStack.length > 0) {
                const {arrX, idx} = subStack.pop();
                fStack.push({arrX, idx: idx + 1});
            }
        } else {
            const el = arrX[idx];
            if (Array.isArray(el)) {
                subStack.push({arrX, idx});
                fStack.push({arrX:el, idx:0});
            } else {
                acc += el;
                fStack.push({arrX, idx:idx+1});
            }
        }
    }
    console.log(acc);


</script>
</body>
</html>
